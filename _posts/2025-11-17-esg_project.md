---
layout: home
title: "LLM 기반 명칭 정규화 모델을 통한 주주 구조 및 친족 지분 분석 시스템 설계"
excerpt: "명칭 정규화 LLM + RAG/TAG 파이프라인으로 주주명 매칭 정확도를 높이고 친족 지분 추정을 자동화"
date: 2025-11-17 21:00:00 +0900
categories: [blog]        # URL에 사용됨: /blog/첫-글-제목/
tags: [LLM, RAG, TAG, ESG]
author_profile: true
toc: true
toc_sticky: true
math: true
# pin: true               # 홈에 고정하고 싶으면 주석 해제
# header:
#   teaser: /assets/images/teasers/my-teaser.jpg   # 목록 썸네일
---

# LLM 기반 명칭 정규화 모델을 통한 주주 구조 및 친족 지분 분석 시스템 설계

## 1. 프로젝트 소개 및 개요

### 소개
ESG 확산으로 지배구조(G) 정보의 투명성과 재현성이 핵심 과제가 되었습니다. 공시 속 주주 정보와 불명확한 ‘관계’ 표기 때문에 가족·특수관계 판정과 실질 오너십 파악이 여전히 수작업에 머물고 있습니다. 본 프로젝트는 DART(전자공시 시스템) 속 ‘주주에 관한 사항’을 기반으로 하여, LLM+Web RAG로 관계를 근거와 신뢰도와 함께 추론하며, 가족지분 합계와 오차율 등 정량 지표로 검증하는 ESG-G 분석 자동화 시스템을 제안합니다. 2명이 참여하여 3개월 동안 작업에 착수했으며, 한국경영컨설팅학회가 주최한 2025년 추계공동학술대회의 대학생 논문 경진대회에서 우수한 성적을 거둘 수 있었습니다.

## 문제정의
기업의 지배구조를 분석하기 위해 DART(전자공시 시스템 https://dart.fss.or.kr/)에 접속하여 공시 항목 중 주주에 관한 사항 테이블을 참고하고, 관계 열의 부족한 정보를 보완하고자 모든 인물들을 검색하는 과정을 수행해야 했습니다. 하지만, 해당 작업은 많은 시간을 요구하며(321개의 기업을 대상 약 3달 소요, 경제정의연구소), 분석자마다 판단이 달라 일관성이 낮다는 문제가 있습니다.

## 2. 프로젝트 세부사항

### 2-1. 데이터 수집 및 전처리
본 프로젝트에서는 기업 내 주요 임원구조를 알고자, 국내 상장기업의 공시 정보를 제공하는 금융감독원 전자공시시스템(DART)의 사업보고서 중 「Ⅶ. 주주에 관한 사항」에 포함된 table_002 주주 명단을 분석 대상으로 선정하여 진행했습니다. 322개의 기업을 직접 선정한 뒤, 보유 주식수, 지분율 등 주요 필드를 포함하는 주주 테이블을 자동으로 추출·정제를 수행했습니다. 추출된 원본 테이블은 CSV 형식으로 저장되었으며, 이후 분석 편의를 위해 열 이름 정규화(공백 제거, 한글 표준화), 숫자형 필드(주식수, 지분율 등)의 콤마 제거 및 결측값 처리 과정을 수행했습니다.

다음은 BGF 리테일 기업을 대상으로 한 예시 데이터 수집 및 전처리 사례입니다.

| 성명 | 관계 | 주식의 종류 | 기초 주식수 | 기초 지분율(%) | 기말 주식수 | 기말 지분율(%) | 비고 |
|---|---|---|---:|---:|---:|---:|---|
| (주)비지에프 | 본인 | 보통주 | 5,185,172 | 30.00 | 5,185,172 | 30.00 | - |
| 홍석조 | 특수관계인 | 보통주 | 1,271,876 | 7.36 | 1,271,876 | 7.36 | - |
| 홍석현 | 특수관계인 | 보통주 | 547,071 | 3.17 | 547,071 | 3.17 | - |
| 홍라영 | 특수관계인 | 보통주 | 921,322 | 5.33 | 921,322 | 5.33 | - |
| 홍석준 | 특수관계인 | 보통주 | 859,646 | 4.97 | 709,646 | 4.11 | 장내매매 |
| 홍승연 | 특수관계인 | 보통주 | 251,893 | 1.46 | 251,893 | 1.46 | - |
| 홍정환 | 특수관계인 | 보통주 | 242,825 | 1.40 | 242,825 | 1.40 | - |
| 신연균 | 특수관계인 | 보통주 | 179,820 | 1.04 | 179,820 | 1.04 | - |
| 홍정혁 | 특수관계인 | 보통주 | 13,776 | 0.08 | 0 | 0.00 | 장내매매 |
| 이건준 | 계열회사임원 | 보통주 | 11,162 | 0.06 | 11,162 | 0.06 | - |
| 류철한 | 계열회사임원 | 보통주 | 4,360 | 0.03 | 4,360 | 0.03 | - |
| 송재국 | 계열회사임원 | 보통주 | 800 | 0.00 | 0 | 0.00 | 특수관계인 해소 |
| 유선웅 | 계열회사임원 | 보통주 | 1,050 | 0.01 | 1,050 | 0.01 | - |
| 박희태 | 계열회사임원 | 보통주 | 1,000 | 0.01 | 0 | 0.00 | 특수관계인 해소 |
| 김우회 | 계열회사임원 | 보통주 | 1,841 | 0.01 | 0 | 0.00 | 특수관계인 해소 |
| 신재호 | 계열회사임원 | 보통주 | 786 | 0.00 | 0 | 0.00 | 특수관계인 해소 |
| 임현식 | 계열회사임원 | 보통주 | 1,298 | 0.01 | 0 | 0.00 | 특수관계인 해소 |
| 장영철 | 계열회사임원 | 보통주 | 174 | 0.00 | 174 | 0.00 | - |
| 안기성 | 계열회사임원 | 보통주 | 5,000 | 0.03 | 0 | 0.00 | 특수관계인 해소 |
| 양재석 | 계열회사임원 | 보통주 | 1,883 | 0.01 | 0 | 0.00 | 특수관계인 해소 |
| 김민형 | 계열회사임원 | 보통주 | 1,238 | 0.01 | 0 | 0.00 | 특수관계인 해소 |
| 홍철기 | 계열회사임원 | 보통주 | 0 | 0.00 | 2,329 | 0.01 | 신규선임(유상취득) |
| 황환조 | 계열회사임원 | 보통주 | 0 | 0.00 | 3,558 | 0.02 | 신규선임(유상취득) |
| 이인호 | 계열회사임원 | 보통주 | 0 | 0.00 | 1,000 | 0.01 | 신규선임(유상취득) |
| 이윤성 | 계열회사임원 | 보통주 | 0 | 0.00 | 100 | 0.00 | 신규선임(유상취득) |
| (재)홍진기 법률연구재단 | 특수관계인 | 보통주 | 1,799 | 0.01 | 1,799 | 0.01 | - |
| (재)비지에프복지재단 | 특수관계인 | 보통주 | 1,798 | 0.01 | 1,798 | 0.01 | - |
| **계** | **계** | **보통주** | **9,507,590** | **55.01** | **9,338,193** | **54.03** | **-** |
| **계** | **계** | **우선주** | **-** | **-** | **-** | **-** | **-** |


경제정의연구소의 도움을 받아 322개의 기업을 대상으로 사전조사한 친족여부 정보를 획득할 수 있었고, 해당 내용을 바탕으로 Label Data 또한 수집 및 제작할 수 있었습니다.

다음은 BGF 리테일 기업을 대상으로 한 Label Data의 예시 입니다.

```json
{"company":"BGF리테일","name":"홍정환","share_count":242825,"formula_numbers":[179820,11162,4360,1050,174,3558,1000,100],"completion":"친족이 아닙니다."}
```

### 2-2. 기업정보 사전조사
기업별로 회사명, 업종, 주요 제품, 홈페이지 URL을 수집한 뒤, DuckDuckGo 웹 검색 결과와 공식 홈페이지 텍스트를 LLM에 결합 제공하여, 대중적 명칭(브랜드명)과 홈페이지 기반 요약 정보를 자동 생성하는 TAG 테이블(기업정보_분석결과.csv)을 구축하였다.

TAG 테이블은 회사명에 대응하는 **‘사람들이 실제로 부르는 이름’과 ‘무슨 사업을 하는 회사인지에 대한 2–3줄 요약’**을 제공함으로써, 이후 Web RAG 기반 가족/친족 관계 추론에서 기업 컨텍스트를 안정적으로 주입하는 역할을 수행합니다.

다음은 BGF 리테일 기업을 대상으로 한 사전조사 Table 결과의 예시 입니다.


| 회사명 | 대중적이름(추정) | 주요제품 | 검색결과요약 | 홈페이지정보(요약) |
|---|---|---|---|---|
| BGF리테일 | CU (씨유) | 체인화 편의점 | **Wikipedia**: BGF리테일은 국내 최대 편의점 프랜차이즈 ‘CU’를 운영하는 대기업. 점포수, 영업이익 기준 1위 유지(2025-08-14 기준) 등.<br>**Saramin**: 체인화 편의점 · 주소 · … 라이프스타일 맞춤 상품/서비스 제공, 종합 유통 기업 지향 등.<br>**Namu Wiki**: CU 운영 종합유통서비스 대기업. 2012년 ‘CU’ 출범 후 18,000개+ 점포로 성장.<br>**Hankyung**: ‘편의점 전성시대’ 이끄는 BGF리테일(CU)·GS 등 비교 기사. | BGF리테일은 대한민국 일등 편의점 CU를 운영하는 회사로, 가맹점 성공을 위한 점포 경영 솔루션, 신선 먹거리 공급, 전국 물류 서비스 제공. 포켓CU 앱을 통한 편리한 쇼핑 경험, 글로벌 확장 및 사회공헌 활동 등 공공 인프라적 역할도 강조. |

### 2-2-1. 설계의도
실제 웹 상에서는 동일 이름의 인물, 복수의 계열사, 유사한 상호명이 혼재하기 때문에, LLM이 단순히 ‘회사명 + 인물명’만 보고 가족 관계를 추론할 경우, 잘못된 회사 컨텍스트를 섞어 이해할 위험이 있습니다. 이를 줄이기 위해, 회사별로 대중적 이름·주요 제품·홈페이지 요약을 사전에 구축하여, LLM이 조회 시점부터 기업 정체성을 명확히 인지한 상태에서 인물 관계를 판단하도록 설계하였다.

다음은 BGF 리테일 기업을 대상으로 한 사전조사 결과의 예시입니다.


### 2-3. Web RAG 기반 가족, 친족 관계 추론
주주 명단에 등장하는 각 인물이 해당 기업의 대표이사 또는 주요 임원의 가족·친족에 해당하는지를 판별하기 위해, 웹 검색과 LLM을 결합한 Web RAG(Retrieval-Augmented Generation) 파이프라인을 설계하였습니다.

우선, 기업명과 주주명을 입력으로 받아 LLM이 스스로 3–5개의 최적 검색어를 생성하도록 하였습니다. 예를 들어,
	•	“[회사명] [인물명] 오너 일가”,
	•	“[회사명] [인물명] 특수관계인”,
	•	“[회사명] [인물명] 배우자/자녀”
와 같은 형태의 쿼리를 자동 생성한 뒤, DuckDuckGo 기반 검색기를 통해 다수의 웹 스니펫(제목, URL, 본문 일부)을 수집하였습니다.

수집된 검색 결과는 (1) 가족·지분 관련 키워드(배우자, 자녀, 특수관계인, 오너 일가, 지분 등) 포함 여부, (2) 인물명·기업명의 동시 등장 여부를 기준으로 1차 필터링하였습니다. 이후, 필터링된 스니펫과 기업 정보 요약(TAG: 대중적 이름, 주요 제품, 홈페이지 요약 등)을 LLM에 함께 제공하고,
	•	관계유형: 배우자 / 자녀 / 부모 / 기타가족 / 없음
	•	가족여부: 확실 / 가족으로 예상됨 / 불확실
두 가지 축에 대해 구조화된 답변을 생성하도록 프롬프트를 설계하습니다. LLM 응답은 “관계유형: … / 가족여부: … / 근거요약: …” 형태로 강제하여 후처리와 정량 분석이 가능하도록 하였습니다.

또한, LLM이 스스로 판단의 신뢰도를 재검토하도록 하는 자기 평가(self-reflection) 단계를 추가하였습니다. 응답 후, 스니펫 수·출처·관계 키워드의 충분성을 질문하는 별도의 프롬프트를 통해 “적절 / 재검색 필요” 여부를 판단하게 하고, 재검색 필요로 판단될 경우 추가 검색어를 생성하여 한 차례 더 검색·판단을 수행하는 구조로 구현하였습니다.

### 2-3-1. 설계의도
사람이 케이스마다 검색어를 설계하는 것은 확장성이 없고, 편향이 쉽게 들어갑니다. LLM이 “검색 프롬프트 엔진” 역할까지 수행하도록 설계함으로써, 새로운 기업·인물이 추가되어도 동일 파이프라인으로 확장 가능하게 만들었습니다.

가족관계는 모델의 사전지식만으로는 최신성을 보장하기 어렵고, 증거 기반 판단이 중요합니다. Web RAG 구조를 사용하면 모델이 항상 ‘현재 공개된 웹 정보’를 근거로 답하도록 강제할 수 있으며, 출력에 “근거요약”을 포함시키게 해 **설명 가능성(Explainability)**도 확보할 수 있습니다.

무작위 웹 스니펫을 모두 모델에 넣으면 노이즈가 심합니다. 가족 관련 키워드 + (인물·회사 동시 등장) 조건으로 최소한의 품질 필터를 걸고, 미리 구축한 TAG 요약(대중적 이름, 주요 제품 등)을 프롬프트에 넣어 검색 결과의 맥락을 기업 단위로 안정화하기 위한 설계를 도입했습니다.

### 2-4. Graph 기반 가족 관계도 구축
가족·친족 판단 결과는 NetworkX 기반 방향 그래프로 통합 표현하였습니다. 각 기업은 그래프의 중심 노드로, 각 주주는 주변 노드로 표현하였으며,
	•	노드 속성: status (확실 / 가족으로 예상됨 / 불확실), summary (판단 근거 요약)
	•	엣지 속성: rel (배우자, 자녀, 부모, 기타가족, 없음 등 관계유형)
을 부여하였습니다.

기업별 분석이 끝난 후에는 회사별 서브그래프를 추출하여 PNG 형식의 가족관계도 시각화를 자동 생성하였습니다. 확실한 가족 노드(빨간색), 가족으로 예상되는 노드(주황색), 불확실 노드(회색) 등으로 색상을 구분해, 지배구조 관점에서 오너 일가·특수관계인의 분포를 직관적으로 파악할 수 있도록 하였습니다. 또한, 전체 기업에 대한 통합 그래프를 GEXF 형식으로 저장해, Gephi 등 외부 도구에서 추가 분석(중심성, 커뮤니티 탐지 등)이 가능하도록 하였습니다.

### 2-4-1. 설계의도
주주명단은 보통 2차원 표로 제시되지만, 실제 지배구조는 사람·법인·계열사 사이 관계의 네트워크로 이해하는 편이 더 직관적이라 판단했습니다. Graph 형태로 저장하면, 이후 중앙성, 커뮤니티 탐지 등 그래프 분석 기법을 그대로 ESG G 분석에 가져올 수도 있습니다.

투자자/실무자는 한 회사의 구조를 보고 싶을 때가 많고, 연구자는 여러 회사를 한꺼번에 보고 싶어 합니다. 이를 고려하여 회사별 PNG(설명용) + 전체 GEXF(연구·툴용) 두 레벨로 산출물을 분리하였습니다.

“확실/예상/불확실”을 색으로 표시하면, 나중에 결과를 볼 때 모델의 자신감·근거 부족 구간을 시각적으로 직관화할 수 있습니다. 이는 단순히 ‘정답만 맞췄는지’보다, “어디가 위험 구간인지”를 파악하는 데 도움이 됩니다.

### 2-5. 가족 주식 합계 산출 및 DART 기준값 비교

LLM이 “가족” 또는 “가족으로 예상됨”으로 분류한 인물 목록을 기반으로, 경제정의연구소로부터 사전조사된 친족 주식 수 테이블에서 해당 인물의 보유 주식수를 합산하였습니다.

	1.	성명 열을 기준으로 가족 주주만 필터링
	2.	보유주식수 관련 열(“보통주식수”, “주식수” 등)을 자동 탐지
	3.	문자형(“1,234,567”) 데이터를 수치형으로 정규화 후 합산

이 과정을 통해 LLM 기반 추론에 따른 가족 주식 합계를 계산하고, 앞서 구축한 요약 테이블의 DART ‘친족지분(주식수)’ 공식 값과 비교하였습니다.

기업별로 두 값의 차이와 상대 오차율(%)을 계산하여,

$$
\text{오차율} = 
\frac{\left|\text{LLM\_가족\_주식합계} - \text{DART\_친족지분}\right|}
{\text{DART\_친족지분} + 10^{-6}} \times 100
$$

을 산출하고, 전체 기업에 대한 평균 오차율과 분포를 통해 모델의 실무적 활용 가능성을 평가하였습니다.

### 2-5-1. 설계 이유
LLM 기반 ESG 분석은 “그럴듯한 설명”에 머무르기 쉽다. 이 한계를 넘기 위해, **공식 공시 수치와 직접 비교 가능한 하나의 숫자(오차율)**를 정의하고, 파이프라인의 성능을 정량적으로 평가 가능한 구조로 만들었습니다.

현실적으로 웹 정보가 완전하지 않기 때문에, 엄격한 가족만 포함하면 리콜이 급격히 떨어질 수 있다. “예상”까지 포함한 합계를 계산함으로써, 실제 업무에서 활용 가능한 상·하한 범위를 동시에 보는 것을 목표로 했습니다.


## 3. Result(실험 및 결과)
제안한 Web RAG + LLM 파이프라인은 DART 사업보고서의 주주 명단과 웹 상의 공개 정보를 결합하여, 기업별 가족·친족 주주 구조를 자동으로 복원하였습다.

직접 구축한 라벨셋을 기준으로 평가한 결과, 주주 단위 가족/비가족 분류 정확도는 대략 XX% 수준을 보였으며, “확실”과 “가족으로 예상됨”을 모두 가족으로 간주할 경우 리콜이 증가하는 대신, 일부 오탐지(비가족을 가족으로 판단)가 발생하는 trade-off가 관찰되었습니다. 또한, “계”, “(주) ○○”, “법인” 등 명백히 인격이 아닌 문자열에 대해서는 전처리 단계에서 필터링함으로써 불필요한 웹 검색과 오판단을 최소화하였습니다.

### 3.1 가족 주식 합계 vs DART 친족지분 비교

기업별로 LLM 기반 가족 주식 합계를 산출하고, DART가 공식적으로 보고한 ‘친족지분(주식수)’과 비교한 결과, 평균 오차율은 약 XX% 수준, 일부 기업(예: 오너 일가 구조가 단순하고 정보가 잘 공개된 기업)에서는 **오차율이 한 자릿수(∼X%)**에 근접하는 반면, 비상장 관계사, 사익편취 이슈 등으로 정보가 제한적인 기업에서는 오차율이 상대적으로 크게 나타났습니다.

이는 제안한 파이프라인이 공개 정보가 충분한 기업에 대해서는 가족 지분 구조를 비교적 정확하게 복원할 수 있으며, 동시에 웹 정보의 비대칭성·비공개 구간을 통해 ESG 관점의 정보 불투명성을 간접적으로 드러내는 도구로도 활용될 수 있음을 시사합니다.

### 3.1.1 결과 해석 및 설계 연계
3.1, 3.4에서 DART 공식 수치를 기준값으로 삼은 이유가 여기서 드러납니다. 오차율이 낮은 구간은 “LLM+Web RAG가 공시를 얼마나 잘 따라가는지”를 보여주고, 오차율이 큰 구간은 단순히 “모델이 틀렸다”가 아니라, 정보가 충분히 공개되지 않았거나 복잡하게 얽힌 가족 구조가 존재할 가능성까지 함께 시사합니다. 즉, 이 파이프라인은 “모델 평가”와 “지배구조 리스크 탐지”라는 두 층위의 해석을 동시에 제공합니다.

### 3.2 가족관계도 시각화 및 지배구조 해석 가능성

NetworkX 기반으로 구축한 가족관계도는 기업별로 오너 일가 중심의 지배 구조, 핵심 가족 노드, 주변 특수관계인을 직관적으로 보여줍니다.

확실한 가족 주주는 붉은색, 가족으로 예상되는 주주는 주황색, 불확실한 주주는 회색으로 표시하여, 특정 인물의 이름이 여러 계열사에 반복 등장하는 경우 지배구조상 핵심 허브 역할을 하는 일가 구성원, 공식 공시(친족지분)에는 포함되지 않지만, 웹 정보상 가족으로 추정되는 인물 등을 한눈에 파악할 수 있습니다. 이는 단순한 표 형태의 주주명단을 넘어, “지배구조 네트워크”를 ESG G(Governance) 분석에 직접 활용할 수 있는 시각적 인사이트를 제공합니다

### 3.2.1 결과 해석 및 설계 연계
3.3절에서 그래프 모델을 선택한 설계 덕분에, 결과 해석 단계에서 “누가 몇 주를 가졌는지”를 넘어서 “누가 구조의 허브인지”까지 이야기할 수 있게 됩니다.
색상으로 status를 구분한 설계는, 실제 회사 발표/레포트에서 **“이 노드는 공개 정보로 확인된 가족, 이 노드는 추정”**이라는 신뢰도 레이어를 함께 제시할 수 있게 해줍니다. 이는 ESG 분석에서 중요한 “투명하게 설명 가능한 모델(Explainable Governance Analytics)”이라는 포지셔닝과도 연결됩니다.